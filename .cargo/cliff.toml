# cliff.toml

[changelog]
header = """
# CHANGELOG

Este archivo documenta los cambios mÃ¡s relevantes realizados en cada versiÃ³n. El formato estÃ¡ basado
en [Keep a Changelog](https://keepachangelog.com/es-ES/1.0.0/), y las versiones se numeran siguiendo
las reglas del [Versionado SemÃ¡ntico](https://semver.org/lang/es/).

Resume la evoluciÃ³n del proyecto para usuarios y colaboradores, destacando nuevas funcionalidades,
correcciones, mejoras durante el desarrollo o cambios en la documentaciÃ³n. Cambios menores o
internos pueden omitirse si no afectan al uso del proyecto.
"""
trim = true
render_always = true

body = """
{% if version %}
## {{ version | trim_start_matches(pat="v") }} ({{ timestamp | date(format="%Y-%m-%d") }})
{% else %}
## Pendiente de publicaciÃ³n
{% endif %}\
{% set base = "https://git.cillero.es/manuelcillero/pagetop" %}\
{% for group, commits in commits | group_by(attribute="group") %}
### {{ group | upper_first }}
{% for commit in commits %}
{%- set msg = commit.message
    | split(pat="\n")
    | first
    | replace(from="âœ¨ ", to="")
    | replace(from="ğŸ› ", to="")
    | replace(from="â¬†ï¸ ", to="")
    | replace(from="ğŸš§ ", to="")
    | replace(from="â™»ï¸ ", to="")
    | replace(from="âœï¸ ", to="")
    | replace(from="ğŸ·ï¸ ", to="")
    | replace(from="ğŸ§‘â€ğŸ’» ", to="")
    | replace(from="ğŸ± ", to="")
    | replace(from="ğŸ“ ", to="")
    | replace(from="ğŸ’¡ ", to="")
-%}
{% set sha7 = commit.id | truncate(length=7, end="") %}
- {{ msg | trim }} ([{{ sha7 }}]({{ base }}/commit/{{ commit.id }}){% if commit.author.name != "Manuel Cillero" %} - {{ commit.author.name }}{% endif %})
{% endfor %}{% endfor %}
"""

[git]
conventional_commits = false
filter_unconventional = false
topo_order_commits = true
sort_commits = "oldest"

commit_parsers = [
    { message = "^âœ¨", group = "AÃ±adido" },
    { message = "^ğŸ›", group = "Corregido" },
    { message = "^ğŸš§", group = "Cambiado" },
    { message = "^â™»ï¸", group = "Cambiado" },
    { message = "^âœï¸", group = "Cambiado" },
    { message = "^ğŸ·ï¸", group = "Cambiado" },
    { message = "^ğŸ§‘â€ğŸ’»", group = "Cambiado" },
    { message = "^ğŸ±", group = "Cambiado" },
    { message = "^â¬†ï¸", group = "Dependencias" },
    { message = "^ğŸ“", group = "Documentado" },
    { message = "^ğŸ’¡", group = "Documentado" },
    { message = "^.*", group = "Otros cambios" },
]
